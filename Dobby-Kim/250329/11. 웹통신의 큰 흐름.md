# 11. 웹 통신의 큰 흐름

## 주요 키워드
- **DNS 조회:** 도메인 → IP 변환.
- **TCP 연결:** 안정적인 데이터 전송을 위한 3-way 핸드쉐잌.
- **TLS 핸드셰이크:** HTTPS의 보안 연결 구축.
- **HTTP 요청/응답:** 클라이언트와 서버 간의 데이터 교환.
- **브라우저 렌더링:** HTML, CSS, JS 등을 파싱하여 웹 페이지 구성.


### 1. URL 입력 및 DNS 조회
- **URL 입력:** 사용자가 브라우저 주소창에 `www.naver.com`을 입력
- **DNS 조회:**
    - 브라우저는 먼저 로컬 캐시나 운영체제 캐시에서 해당 도메인의 IP 주소가 저장되어 있는지 확인
    - 캐시에 없다면, DNS 서버에 쿼리를 보내 도메인 이름을 실제 통신에 필요한 IP 주소로 변환
    - 이 과정 덕분에 사람이 기억하기 쉬운 도메인 이름을 컴퓨터가 이해하는 숫자(IP)로 변환할 수 있다

답변할 때:
사용자가 `www.naver.com`을 입력하면 DNS 쿼리를 통해 예를 들어 `223.130.195.200`와 같은 IP 주소를 획득할 수 있습니다.

---
### 2. TCP 연결 및 TLS 핸드쉐이크

- **TCP 연결 (3-way 핸드쉐이크):**
    - 브라우저는 획득한 IP 주소로 연결 요청을 보내기 위해 TCP 연결을 설정
    - **SYN → SYN-ACK → ACK**의 3단계 과정을 거쳐 안정적인 연결을 만듦
- **TLS 핸드셰이크 (HTTPS인 경우):**
    - 보안을 위해 HTTPS 프로토콜을 사용할 경우, TCP 연결 후 TLS(전송 계층 보안) 핸드셰이크가 수행되어 암호화 통신 채널이 구축
    - 이 과정에서는 인증서 교환, 대칭키 협상 등이 이루어져 데이터가 안전하게 전송

답변:
네이버는 보안을 위해 HTTPS를 사용하므로, TLS 핸드셰이크를 통해 클라이언트와 서버 간의 암호화 통신이 시작됩니다.

---

### 3. HTTP 요청 전송

- **요청 생성:** 브라우저는 준비된 TCP/TLS 연결 위에서 HTTP 프로토콜을 사용해 요청을 생성
    - 주로 `GET` 요청을 보내며, 요청 헤더에는 브라우저 정보, 쿠키, 언어 설정 등이 포함됩니다.
- **요청 전송:** 생성된 HTTP 요청이 서버로 전송됩니다.

답변:
브라우저는 `GET / HTTP/1.1`과 같은 요청을 보내 네이버 메인 페이지의 HTML 문서를 요청합니다.

---
### 4. 서버의 요청 처리 및 응답 전송
- **요청 처리:** 서버는 클라이언트의 요청을 받고, 내부 로직을 통해 필요한 데이터를 조회
    - 데이터베이스 접근, 캐시 조회, 비즈니스 로직 실행 등
- **응답 생성:** 서버는 처리 결과를 바탕으로 HTTP 응답(예: `200 OK`)을 생성
    - 응답 본문에는 HTML, CSS, JavaScript 등 클라이언트가 렌더링할 수 있는 데이터가 포함
- **응답 전송:** 생성된 HTTP 응답이 클라이언트(브라우저)로 전송

답변:
네이버 서버는 요청을 받아 메인 페이지의 HTML과 함께 스타일, 스크립트 등의 정보를 포함한 응답을 보냅니다.

---

### 5. 브라우저의 응답 수신 및 페이지 렌더링
- **응답 수신:** 브라우저는 서버로부터 받은 HTTP 응답을 처리
- **HTML 파싱 및 DOM 구성:** HTML 문서를 파싱하여 브라우저 내부에 DOM(Document Object Model)을 구성
- **리소스 요청:** HTML 내에 포함된 CSS, JavaScript, 이미지 파일 등 추가 리소스에 대해 별도의 HTTP 요청이 발생
- **렌더링:** 모든 리소스가 로드되면 브라우저는 이를 조합하여 최종 웹 페이지를 화면에 표시

답변:
네이버 메인 페이지가 화면에 나타나고, 사용자는 다양한 인터랙션을 통해 웹 페이지와 상호작용할 수 있습니다.
